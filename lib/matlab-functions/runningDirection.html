<?xml version="1.0" encoding="utf-8"?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<title></title>
<meta  name="author" content="T. Woehrl" />
<link rel="stylesheet" type="text/css" href="theme.css" />
</head>
<body>
<div id="org-div-home-and-up"><a href="/">Home</a> <a href="./">Index</a>
</div><div class="content"><pre class="codeinput"><span class="keyword">function</span> [lx,ly,phi,dm]=runningDirection(x,y)
<span class="comment">% info: average direction (linear regression method) of moving point r(x1,x2,t)</span>
<span class="comment">%</span>
<span class="comment">% syntax: [lx,ly,phi,dm]=runningDirection(x,y)</span>
<span class="comment">%</span>
<span class="comment">% input:</span>
<span class="comment">% - x: Signal in Laufrichtung 1D-Vektor</span>
<span class="comment">% - y: Signal in horizontaler Richtung 1D-Vektor</span>
<span class="comment">% output:</span>
<span class="comment">% - lx, ly: Lineare Regression</span>
<span class="comment">% - phi: Winkel zwischen x-Achse und (lx,ly)</span>
<span class="comment">% - dm: Drehmatrix</span>
<span class="comment">%</span>
<span class="comment">% requires:</span>
<span class="comment">%</span>
<span class="comment">% see also:</span>
<span class="comment">%</span>
<span class="comment">% created with: MATLAB ver. 8.6.0.267246 (R2015b) on Microsoft Windows 7 Professional  Version 6.1 (Build 7601: Service Pack 1)</span>
<span class="comment">%</span>
<span class="comment">% created by: T. Woehrl</span>
<span class="comment">% created on: 2017-03-01</span>
<span class="comment">%</span>
<span class="comment">% modified:</span>
<span class="comment">% - on:  by:  to:</span>
<span class="comment">%</span>
<span class="comment">% disclaimer: Without warranty of any kind.</span>
<span class="comment">%</span>
<span class="comment">%------------- BEGIN CODE ---------------</span>
<span class="comment">% Fit</span>
px=polyfit(1:length(x),x',1);
lx=polyval(px,1:length(x));

py=polyfit(1:length(y),y',1);
ly=polyval(py,1:length(y));


<span class="comment">% Winkel zwischen mittlerer Laufrichtung und x-Achse</span>
phi=atan2(ly(end)-ly(1),lx(end)-lx(1));

<span class="comment">% Drehmatrix</span>
dm=[cos(phi) -sin(phi); sin(phi) cos(phi)];
<span class="keyword">end</span>
<span class="comment">%------------- END OF CODE --------------</span>
</pre>Â´
</div>
</body>
</html>
